# RFID读卡器库

基于MFRC522芯片的RFID读卡器Blockly库，支持读取卡片UID、数据读写、密钥验证等功能。

## 特性

- 🎯 **简单易用**: 提供直观的积木块接口，无需复杂编程
- 📖 **卡片识别**: 检测卡片存在并读取UID
- 🔐 **安全验证**: 支持Mifare Classic密钥验证（Key A/B）
- 💾 **数据操作**: 支持数据块的读取和写入
- 🌐 **多语言支持**: 中英文界面切换
- 🔧 **兼容性好**: 支持Arduino UNO、ESP32等主流开发板

## 支持的开发板

- Arduino UNO/Nano/Pro Mini
- ESP32系列开发板
- ESP32-C3/S3系列
- Arduino R4 Minima/WiFi

## 硬件连接

### 标准连接方式（SPI接口）
| MFRC522引脚 | Arduino UNO | ESP32    |
|-------------|-------------|----------|
| SDA/SS      | 10          | 5        |
| SCK         | 13          | 18       |
| MOSI        | 11          | 23       |
| MISO        | 12          | 19       |
| IRQ         | 未使用      | 未使用   |
| GND         | GND         | GND      |
| RST         | 9           | 4        |
| 3.3V        | 3.3V        | 3.3V     |

## 功能积木

### 初始化
- **初始化RFID模块**: 设置SDA和RST引脚

### 卡片检测
- **检测是否有卡片靠近**: 返回布尔值
- **读取卡片UID**: 返回卡片的唯一标识符
- **获取UID字符串格式**: 获取格式化的UID字符串
- **当前UID等于**: 比较UID是否匹配

### 数据操作
- **验证密钥**: 验证指定扇区的访问密钥
- **读取数据块**: 从指定块读取数据
- **写入数据块**: 向指定块写入数据
- **停止RFID通信**: 结束与卡片的通信

## 使用示例

### 基础卡片检测
```
初始化RFID模块 SDA引脚10 RST引脚9
如果 检测是否有卡片靠近 执行
  变量 uid 设为 读取卡片UID
  串口输出 uid
  停止RFID通信
```

### 数据读写
```
初始化RFID模块 SDA引脚10 RST引脚9
如果 检测是否有卡片靠近 执行
  读取卡片UID
  如果 验证密钥 扇区1 密钥类型密钥A 密钥"FFFFFFFFFFFF" 执行
    变量 data 设为 读取数据块4
    串口输出 data
    写入数据块4 数据"Hello RFID!"
  停止RFID通信
```

## 技术规格

- **通信接口**: SPI
- **工作电压**: 3.3V
- **支持卡片**: Mifare Classic 1K/4K, Mifare Ultralight
- **工作频率**: 13.56MHz
- **读取距离**: 约3cm

## 注意事项

1. **电压兼容**: MFRC522模块工作电压为3.3V，使用5V开发板时需要电平转换
2. **接线正确**: 确保SPI接线正确，特别是SDA/SS引脚
3. **密钥管理**: 默认密钥为"FFFFFFFFFFFF"，实际使用中应更改
4. **数据格式**: 支持文本和十六进制字符串格式的数据写入

## 依赖库

本库基于以下开源库构建：
- **MFRC522** - RFID读卡器驱动库

## 版本历史

- v1.0.0: 初始版本，支持基础RFID读写功能