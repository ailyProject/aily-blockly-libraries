[
  {
    "type": "pca9685_create",
    "message0": "创建 PCA9685 舵机驱动器 变量 %1",
    "args0": [
      {
        "type": "field_input",
        "name": "VAR",
        "text": "pwm"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "创建PCA9685舵机驱动器对象（16通道PWM控制器）"
  },
  {
    "type": "pca9685_begin_with_pins",
    "message0": "初始化 %1 I2C地址0X %2 SDA引脚 %3 SCL引脚 %4",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "ADDRESS",
        "check": "Number"
      },
      {
        "type": "field_dropdown",
        "name": "SDA_PIN",
        "options": "${board.digitalPins}"
      },
      {
        "type": "field_dropdown",
        "name": "SCL_PIN",
        "options": "${board.digitalPins}"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "初始化PCA9685设备并指定自定义I2C引脚"
  },
  {
    "type": "pca9685_set_freq",
    "message0": "设置 %1 PWM频率 %2 Hz",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "FREQ",
        "check": "Number"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "设置PWM输出频率（舵机通常使用50-60Hz）"
  },
  {
    "type": "pca9685_set_servo_angle",
    "message0": "设置 %1 通道 %2 舵机角度 %3 度",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "CHANNEL",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "ANGLE",
        "check": "Number"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "设置指定通道舵机角度（0-180度）"
  },
  {
    "type": "pca9685_set_pwm",
    "message0": "设置 %1 通道 %2 PWM值 开始 %3 结束 %4",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "CHANNEL",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "ON",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "OFF",
        "check": "Number"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "直接设置PWM值（0-4095），高级用户使用"
  },
  {
    "type": "pca9685_set_microseconds",
    "message0": "设置 %1 通道 %2 脉宽 %3 微秒",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "CHANNEL",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "MICROSECONDS",
        "check": "Number"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "设置脉冲宽度（微秒），舵机通常500-2500μs"
  },
  {
    "type": "pca9685_config_servo",
    "message0": "配置 %1 舵机参数 最小PWM %2 最大PWM %3",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "MIN",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "MAX",
        "check": "Number"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "配置舵机PWM范围（默认100-700）"
  },
  {
    "type": "pca9685_set_all_servos",
    "message0": "设置 %1 所有舵机角度 %2",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "ANGLE",
        "check": "Number"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "将所有16个通道设置为相同角度"
  },
  {
    "type": "pca9685_sleep",
    "message0": "使 %1 进入睡眠模式",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "进入低功耗睡眠模式"
  },
  {
    "type": "pca9685_wakeup",
    "message0": "唤醒 %1",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "从睡眠模式唤醒"
  },
  {
    "type": "pca9685_set_servo_range",
    "message0": "设置 %1 通道 %2 舵机范围 最小角度 %3 对应PWM %4 最大角度 %5 对应PWM %6",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "CHANNEL",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "MIN_ANGLE",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "MIN_PWM",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "MAX_ANGLE",
        "check": "Number"
      },
      {
        "type": "input_value",
        "name": "MAX_PWM",
        "check": "Number"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#FF6B35",
    "tooltip": "为特定通道自定义舵机角度-PWM映射关系"
  },
  {
    "type": "pca9685_angle_to_pwm",
    "message0": "%1 将角度 %2 转换为PWM值",
    "args0": [
      {
        "type": "field_variable",
        "name": "VAR",
        "variable": "pwm",
        "variableTypes": ["Adafruit_PWMServoDriver"],
        "defaultType": "Adafruit_PWMServoDriver"
      },
      {
        "type": "input_value",
        "name": "ANGLE",
        "check": "Number"
      }
    ],
    "output": "Number",
    "colour": "#FF6B35",
    "tooltip": "将角度值转换为对应的PWM值"
  },
  {
    "type": "serial_command_init",
    "message0": "初始化串口命令解析器 串口 %1 波特率 %2",
    "args0": [
      {
        "type": "field_dropdown",
        "name": "SERIAL",
        "options": [
          ["Serial (RX=0, TX=1)", "Serial"],
          ["Serial1 (RX=19, TX=18)", "Serial1"],
          ["Serial2 (RX=17, TX=16)", "Serial2"],
          ["Serial3 (RX=15, TX=14)", "Serial3"]
        ]
      },
      {
        "type": "field_dropdown",
        "name": "BAUD",
        "options": [
          ["9600", "9600"],
          ["19200", "19200"],
          ["38400", "38400"],
          ["57600", "57600"],
          ["115200", "115200"]
        ]
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#2196F3",
    "tooltip": "初始化全局串口命令解析器并自动配置硬件引脚"
  },
  {
    "type": "serial_command_add",
    "message0": "添加命令 命令字符串 %1 执行代码 %2",
    "args0": [
      {
        "type": "input_value",
        "name": "COMMAND",
        "check": "String"
      },
      {
        "type": "input_statement",
        "name": "CODE"
      }
    ],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#2196F3",
    "tooltip": "为全局命令解析器添加一个命令和对应的执行代码"
  },
  {
    "type": "serial_command_read",
    "message0": "检查并处理串口命令",
    "args0": [],
    "previousStatement": null,
    "nextStatement": null,
    "colour": "#2196F3",
    "tooltip": "检查串口是否有新命令并执行相应的代码"
  },
  {
    "type": "serial_command_available",
    "message0": "串口有可用命令",
    "args0": [],
    "output": "Boolean",
    "colour": "#2196F3",
    "tooltip": "判断串口是否有新的命令可处理"
  },
  {
    "type": "serial_command_get",
    "message0": "获取当前命令字符串",
    "args0": [],
    "output": "String",
    "colour": "#2196F3",
    "tooltip": "获取当前接收到的命令字符串"
  }
]