{
    "kind": "category",
    "name": "小智AI",
    "icon": "fa-light fa-message-bot",
    "colour": "#FF6B35",
    "contents": [
        {
            "kind": "label",
            "text": "多线程及串口扩展"
        },
        {
            "kind": "block",
            "type": "esp32_task",
            "inputs": {
                "INTERVAL": {
                    "shadow": {
                        "type": "math_number",
                        "fields": {
                            "NUM": 4096
                        }
                    }
                }
            }
        },
        {
            "kind": "block",
            "type": "esp32_serial_init"
        },
        {
            "kind": "label",
            "text": "初始化"
        },
        {
            "kind": "block",
            "type": "esp32ai_button_setup"
        },
        {
            "kind": "block",
            "type": "esp32_i2s_mic_setup"
        },
        {
            "kind": "block",
            "type": "esp32ai_i2s_speaker_setup"
        },
        {
            "kind": "block",
            "type": "esp32ai_init_display"
        },
        {
            "kind": "block",
            "type": "esp32ai_init_wifi"
        },
        {
            "kind": "block",
            "type": "aivox_config_ota_url",
            "inputs": 
                {
                    "ai_vox_ota_url": {
                        "shadow": {
                            "type": "text",
                            "fields": {
                                "TEXT": "https://api.tenclass.net/xiaozhi/ota/"
                            }
                        }
                    }
                }
        },
        {
            "kind": "block",
            "type": "aivox_config_websocket",
            "inputs": 
                {
                    "ai_vox_websocket_url": {
                        "shadow": {
                            "type": "text",
                            "fields": {
                                "TEXT": "wss://api.tenclass.net/xiaozhi/v1/"
                            }
                        }
                    },
                    "ai_vox_websocket_param": {
                        "shadow": {
                            "type": "text",
                            "fields": {
                                "TEXT": "{{\"Authorization\", \"Bearer test-token\"}}"
                            }
                        }
                    }

                }
        },
        {
            "kind": "block",
            "type": "esp32ai_start_engine"
        },
        {
            "kind": "block",
            "type": "aivox_display_mode"
        },
        {
            "kind": "label",
            "text": "控制"
        },
        {
            "kind": "block",
            "type": "esp32ai_wake_engine"
        },
        {
            "kind": "block",
            "type": "aivox3_set_es8311_volume",
            "inputs": 
            {
                "aivox3_es8311_volume": {
                    "shadow": {
                        "type": "math_number",
                        "fields": {
                            "NUM": 100
                        }
                    }
                }
            }
        },
        {
            "kind": "block",
            "type": "aivox3_set_screen_light",
            "inputs": 
            {
                "aivox3_screen_light": {
                    "shadow": {
                        "type": "math_number",
                        "fields": {
                            "NUM": 255
                        }
                    }
                }
            }
        },
        {
            "kind": "block",
            "type": "aivox_lcd_show_status",
            "inputs": 
                {
                    "ai_vox_content": {
                        "shadow": {
                            "type": "text",
                            "fields": {
                                "TEXT": "连接中"
                            }
                        }
                    }
                }
        },
        {
            "kind": "block",
            "type": "aivox3_ST77789TurnOnBacklight_engine"
        },
        {
            "kind": "block",
            "type": "aivox3_ST77789TurnOffBacklight_engine"
        },
        {
            "kind": "label",
            "text": "事件"
        },
        {
          "kind": "block",
          "type": "esp32ai_button_click"
        },
        {
          "kind": "block",
          "type": "esp32ai_button_double_click"
        },
        {
          "kind": "block",
          "type": "esp32ai_button_long_pressing"
        },
        {
          "kind": "block",
          "type": "esp32ai_state_change_root"
        },
        {
          "kind": "block",
          "type": "esp32ai_state_change_case"
        },
        {
            "kind": "block",
            "type": "esp32ai_loop_activation"
        },
        {
            "kind": "block",
            "type": "get_aivox_activation_message"
        },
        {
            "kind": "block",
            "type": "esp32ai_loop_emotion"
        },
        {
            "kind": "block",
            "type": "get_aivox_emotion_result"
        },
        {
            "kind": "block",
            "type": "aivox_emotion"
        },
        {
            "kind": "block",
            "type": "aivox_emotion_list"
        },
        {
            "kind": "block",
            "type": "esp32ai_loop_chat_message"
        },
        {
            "kind": "block",
            "type": "aivox_loop_chat_message_role_var"
        },
        {
            "kind": "block",
            "type": "aivox_loop_chat_message_msg_var"
        },
        {
            "kind": "label",
            "text": "MCP"
        },
        {
            "kind": "block",
            "type": "aivox_mcp_register_control_command",
            "inputs": 
                {
                    "NAME": {
                        "block": {
                            "type": "aivox_mcp_control",
                            "inputs": 
                            {
                                "DESC": {
                                    "shadow": {
                                        "type": "text",
                                        "fields": {
                                            "TEXT": "LED, true for on, false for off"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "INPUT0": {
                        "block": {
                            "type": "aivox_mcp_control_param"
                        }
                    }
                }

        },
        {
            "kind": "block",
            "type": "aivox_mcp_control",
            "inputs": 
                {
                    "DESC": {
                        "shadow": {
                            "type": "text",
                            "fields": {
                                "TEXT": "LED, true for on, false for off"
                            }
                        }
                    }
                }
        },
        {
            "kind": "block",
            "type": "aivox_mcp_control_param"
        },
        {
            "kind": "block",
            "type": "esp32ai_loop_mcp"
        },
        {
            "kind": "block",
            "type": "aivox_get_iot_message_event_name_new"
        },
        {
            "kind": "block",
            "type": "aivox_control_message_event_fuction"
        },
        {
            "kind": "block",
            "type": "aivox_update_mcp_control_state_new",
            "inputs": {

                "STATE": {
                    "shadow": {
                        "type": "text",
                        "fields": {
                            "TEXT": "nulllab"
                        }
                    }
                }
            }
        },
        {
            "kind": "block",
            "type": "aivox_response_mcp_control_result_new"
        }
    ]
}
