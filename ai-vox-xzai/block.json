[
    {
        "type": "esp32_task",
        "message0": "ESP32 task%1 Core%2 空间分配%3",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "TASK",
                "options": [
                    ["任务1", "1"],
                    ["任务2", "2"],
                    ["任务3", "3"],
                    ["任务4", "4"],
                    ["任务5", "5"],
                    ["任务6", "6"],
                    ["任务7", "7"],
                    ["任务8", "8"]
                ]
            },
            {
                "type": "field_dropdown",
                "name": "CORE",
                "options": [
                    ["核心0", "0"],
                    ["核心1", "1"]
                ]
            },
            {
                "type": "input_value",
                "name": "INTERVAL",
                "check": "Number"
            }
        ],
        "message1": "初始化%1",
        "args1": [
            {
                "type": "input_statement",
                "name": "csCALLBACK"
            }
        ],
        "message2": "循环%1",
        "args2": [
            {
                "type": "input_statement",
                "name": "CALLBACK"
            }
        ],
        "colour": "#00CED1",
        "inputsInline": false,
        "tooltip": "设置线程在哪个内核上运行",
        "helpUrl": ""
    },
    {
        "type": "esp32_serial_init",
        "message0": "ESP32 串口初始化 %1 RX针脚%2 TX针脚%3 波特率%4",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "SERIAL_PORT",
                "options": [
                    ["Serial", "Serial"],
                    ["Serial1", "Serial1"],
                    ["Serial2", "Serial2"]
                ]
            },
            {
                "type": "field_dropdown",
                "name": "RX_PIN",
                "options": "${board.digitalPins}"
            },
            {
                "type": "field_dropdown",
                "name": "TX_PIN",
                "options": "${board.digitalPins}"
            },
            {
                "type": "field_dropdown",
                "name": "BAUDRATE",
                "options": [
                    ["9600", "9600"], ["19200", "19200"], ["38400", "38400"],
                    ["57600", "57600"], ["115200", "115200"], ["256000", "256000"],
                    ["500000", "500000"]
                ]
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#1E90FF",
        "tooltip": "初始化ESP32指定串口及引脚配置",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_button_setup",
        "message0": "AI触发按钮引脚 %1 模式 %2 低电平有效 %3",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "PIN",
                "options": "${board.digitalPins}"
            },
            {
                "type": "field_dropdown",
                "name": "PIN_MODE",
                "options": [
                    ["普通输入", "INPUT"],
                    ["上拉输入", "INPUT_PULLUP"]
                ]
            },
            {
                "type": "field_dropdown",
                "name": "ACTIVE_LOW",
                "options": [
                    ["是", "TRUE"],
                    ["否", "FALSE"]
                ]
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#5C8AFF",
        "tooltip": "创建并初始化ESP32 AI语音交互按钮（适配Espressif按钮库）",
        "helpUrl": ""
    },
    {
        "message0": "初始化 ESP32_小智AI WIFI模式 %1",
        "type": "esp32ai_init_wifi",
        "args0": [
    
            {
                "type": "field_dropdown",
                "name": "MODE",
                "options": [
                    [
                        "手动配网",
                        "Manual"
                    ]
                ]
            }
        ],
        "extensions":["esp32ai_init_wifi_extension"],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "type": "esp32ai_button_click",
        "message0": "AI触发按钮单击时",
        "message1": "%1",
        "args1": [
            {
                "type": "input_statement",
                "name": "HANDLER"
            }
        ],
        "inputsInline": false,
        "colour": "#5C8AFF",
        "tooltip": "按钮单击事件触发时执行的操作",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_button_double_click",
        "message0": "AI触发按钮双击时",
        "message1": "%1",
        "args1": [
            {
                "type": "input_statement",
                "name": "HANDLER"
            }
        ],
        "inputsInline": false,
        "colour": "#5C8AFF",
        "tooltip": "按钮双击事件触发时执行的操作",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_button_long_pressing",
        "message0": "AI触发按钮长按中",
        "message1": "%1",
        "args1": [
            {
                "type": "input_statement",
                "name": "HANDLER"
            }
        ],
        "inputsInline": false,
        "colour": "#5C8AFF",
        "tooltip": "按钮长按过程中持续触发的操作",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "type": "esp32_i2s_mic_setup",
        "message0": "AI麦克风类型 %1",
        "args0": [
            {
            "type": "field_dropdown",
            "name": "MIC_TYPE",
            "options": [
                ["I2S标准", "AUDIO_INPUT_DEVICE_TYPE_I2S_STD"],
                ["PDM", "AUDIO_INPUT_DEVICE_TYPE_PDM"]
            ],
            "tooltip": "选择麦克风类型（I2S标准需要3个引脚，PDM需要2个引脚）"
            }
        ],
        "extensions": ["esp32_i2s_mic_dynamic_inputs"],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#2ecc71",
        "tooltip": "初始化I2S/PDM麦克风（适配ai_vox_engine音频输入）",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_i2s_speaker_setup",
        "message0": "AI扬声器 SCK/BCLK %1 WS/LRCLK %2 SD/DIN %3",
        "args0": [
            {
            "type": "field_dropdown",
            "name": "SCK_PIN",
            "options": "${board.digitalPins}",
            "tooltip": "时钟引脚（对应kSpeakerPinSck）"
            },
            {
            "type": "field_dropdown",
            "name": "WS_PIN",
            "options": "${board.digitalPins}",
            "tooltip": "帧同步引脚（对应kSpeakerPinWs）"
            },
            {
            "type": "field_dropdown",
            "name": "SD_PIN",
            "options": "${board.digitalPins}",
            "tooltip": "数据输出引脚（对应kSpeakerPinSd）"
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#2ecc71",
        "tooltip": "初始化I2S扬声器（引脚对应main.cpp中的kSpeakerPin*常量）",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_init_display",
        "message0": "原界面初始化显示屏: %1",
        "args0": [
            {
            "type": "field_dropdown",
            "name": "DISPLAY_TYPE",
            "options": [
                ["ST7789 (SPI，240x240)", "ST7789"],
                ["SSD1306 (I2C, 128x64)", "SSD1306"]
            ],
            "tooltip": "选择要初始化的显示屏类型"
            }
        ],
        "extensions": ["esp32ai_init_display_dynamic_inputs"],
        "inputsInline": false,
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "初始化指定类型的显示屏",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_init_nlvgl_display",
        "message0": "自定lVGL初始化显示屏: %1  旋转角度: %2  ",
        "args0": [
            {
            "type": "field_dropdown",
            "name": "DISPLAY_TYPE",
            "options": [
                ["ST7789 (SPI)", "nST7789"],
                ["SSD1306 (I2C)", "nSSD1306"]
            ],
            "tooltip": "选择要初始化的显示屏类型"
            },
            {
                "type": "field_dropdown",
                "name": "ROTATION",
                "options": [
                ["0°", "LV_DISPLAY_ROTATION_0"],
                ["90°", "LV_DISPLAY_ROTATION_90"],
                ["180°", "LV_DISPLAY_ROTATION_180"],
                ["270°", "LV_DISPLAY_ROTATION_270"]
                ]
            }
        ],  
        "extensions": ["esp32ai_init_nlvgl_display_dynamic_inputs"],
        "inputsInline": false,
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "初始化指定类型的显示屏",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "自定义OTA链接 %1 ",
        "type": "aivox_config_ota_url",
        "args0": [
            {"type": "input_value","name": "ai_vox_ota_url","text": "https://api.tenclass.net/xiaozhi/ota/"}
        ],
        "previousStatement": null,
        "tooltip": "使用虾哥服务器不需要调用此块，自建兼容虾哥服务器协议调用此块",
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "message0": "自定义websocket链接 %1",
        "type": "aivox_config_websocket",
        "args0": [
            {"type": "input_value","name": "ai_vox_websocket_url","text": "wss://api.tenclass.net/xiaozhi/v1/"}
        ],
        "message1": "请求头(C语言数组格式) %1 ",
        "args1": [
            {"type": "input_value","name": "ai_vox_websocket_param","text": "{{\"Authorization\", \"Bearer test-token\"}}"}
        ],
        "previousStatement": null,
        "tooltip": "使用虾哥服务器不需要调用此块，自建兼容虾哥服务器协议调用此块",
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "inputsInline": true,
        "message0": "启动ESP32-AI引擎 ",
        "type": "esp32ai_start_engine",
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "inputsInline": true,
        "message0": "初始化会话显示样式为 %1 ",
        "type": "aivox_display_mode",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "display_mode",
                "options": [
                    [
                        "普通",
                        "normal"
                    ],
                    [
                        "微信对话",
                        "wechat"
                    ]
                ]
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "tooltip": "",
        "colour": "#4CAF50"
    },
    {
        "type": "aivox3_set_es8311_volume",
        "message0": "设置AI音量为 %1 ",
        "args0": [
            {"type": "input_value","name": "aivox3_es8311_volume","NUM": 100}
        ],
        "inputsInline": false,
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "设置AI设备音量大小",
        "helpUrl": ""
    },
    {
        "type": "aivox3_set_screen_light",
        "message0": "设置ST7789屏幕亮度为 %1 ",
        "args0": [
            {"type": "input_value","name": "aivox3_screen_light","NUM": 255}
        ],
        "inputsInline": false,
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "设置ST7789屏幕亮度",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "唤醒ESP32-AI",
        "type": "esp32ai_wake_engine",
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#6495ED"
    }, 
    {
        "type": "esp32ai_sendtext",
        "message0": "主动发送消息 %1 ",
        "args0": [
            {"type": "input_value","name": "sendmessage","text": "今天天气怎么样"}
        ],
        "inputsInline": false,
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#6495ED",
        "tooltip": "主动给小智发送消息，让他干活",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "在 %1显示 %2 ",
        "type": "aivox_lcd_show_status",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "location",
                "options": [
                    [
                        "状态框",
                        "ShowStatus"
                    ],
                    [
                        "表情框",
                        "SetEmotion"
                    ],
                    [
                        "内容框",
                        "SetChatMessage"
                    ]
                ]
            },
            {"type": "input_value","name": "ai_vox_content","text": "连接中"}
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "type": "esp32ai_state_change_root",
        "message0": "当AI设备状态变化时",
        "message1": "%1",
        "args1": [
            {"type": "input_statement","name": "STATE_HANDLERS"}
        ],
        "colour": "#4CAF50",
        "inputsInline": false,
        "tooltip": "处理AI设备所有状态变化事件的总入口",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_state_change_case",
        "message0": "当状态为 %1 时",
        "message1": "%1",
        "args0": [
            {
            "type": "field_dropdown",
            "name": "STATE",
            "options": [
                ["空闲 (Idle)", "kIdle"],
                ["已初始化 (Initted)", "kInitted"],
                ["加载中 (Loading)", "kLoading"],
                ["加载失败 (LoadingFailed)", "kLoadingFailed"],
                ["待命 (Standby)", "kStandby"],
                ["连接中 (Connecting)", "kConnecting"],
                ["聆听中 (Listening)", "kListening"],
                ["说话中 (Speaking)", "kSpeaking"]
            ]
            }
        ],
        "args1": [
            {
            "type": "input_statement",
            "name": "DO"
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#8BC34A", 
        "tooltip": "当AI设备进入指定状态时，执行这里的代码",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "点亮ST77789屏 ",
        "type": "aivox3_ST77789TurnOnBacklight_engine",
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "inputsInline": true,
        "message0": "熄灭ST77789屏 ",
        "type": "aivox3_ST77789TurnOffBacklight_engine",
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "type": "esp32ai_loop_activation",
        "message0": "当AI收到激活信息",
        "message1": "%1",
        "args1": [
            {"type": "input_statement","name": "STATE_HANDLERS"}
        ],
        "colour": "#4CAF50",
        "inputsInline": false,
        "tooltip": "AI激活事件的逻辑",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "收到的 %1",
        "type": "get_aivox_activation_message",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "activation_type",
                "options": [
                    ["激活码", "code"],
                    ["激活网址", "message"]
                ]
            }
        ],
        "output": "String",
        "colour": "#4CAF50",
        "tooltip": "获取设备的激活码",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_loop_emotion",
        "message0": "当AI收到表情码",
        "message1": "%1",
        "args1": [
            {"type": "input_statement","name": "STATE_HANDLERS"}
        ],
        "colour": "#4CAF50",
        "inputsInline": false,
        "tooltip": "AI-VOX表情事件的逻辑",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "收到的表情码",
        "type": "get_aivox_emotion_result",
        "output": "String",
        "colour": "#4CAF50",
        "tooltip": "获取当前情绪表情",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "收到的表情为 %1?",
        "type": "aivox_emotion",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "emotion",
                "options": [
                    [
                        "高兴",
                        "happy"
                    ],
                    [
                        "酷炫",
                        "cool"
                    ],
                    [
                        "大笑",
                        "laughing"
                    ],
                    [
                        "搞笑",
                        "funny"
                    ],
                    [
                        "忧伤",
                        "sad"
                    ],
                    [
                        "生气",
                        "angry"
                    ],
                    [
                        "哭泣",
                        "crying"
                    ],
                    [
                        "喜欢",
                        "loving"
                    ],
                    [
                        "尴尬",
                        "embarrassed"
                    ],
                    [
                        "惊讶",
                        "surprised"
                    ],
                    [
                        "震惊",
                        "shocked"
                    ],
                    [
                        "思考",
                        "thinking"
                    ],
                    [
                        "调皮",
                        "winking"
                    ],
                    [
                        "放松",
                        "relaxed"
                    ],
                    [
                        "享受",
                        "delicious"
                    ],
                    [
                        "亲亲",
                        "kissy"
                    ],
                    [
                        "自信",
                        "confident"
                    ],
                    [
                        "困倦",
                        "sleepy"
                    ],
                    [
                        "搞怪",
                        "silly"
                    ],
                    [
                        "困惑",
                        "confused"
                    ]
                ]
            }
        ],
        "output": "Boolean",
        "colour": "#4CAF50",
        "tooltip": "情绪表情",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "表情包 %1",
        "type": "aivox_emotion_list",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "emotion",
                "options": [
                    [
                        "高兴",
                        "happy"
                    ],
                    [
                        "酷炫",
                        "cool"
                    ],
                    [
                        "大笑",
                        "laughing"
                    ],
                    [
                        "搞笑",
                        "funny"
                    ],
                    [
                        "忧伤",
                        "sad"
                    ],
                    [
                        "生气",
                        "angry"
                    ],
                    [
                        "哭泣",
                        "crying"
                    ],
                    [
                        "喜欢",
                        "loving"
                    ],
                    [
                        "尴尬",
                        "embarrassed"
                    ],
                    [
                        "惊讶",
                        "surprised"
                    ],
                    [
                        "震惊",
                        "shocked"
                    ],
                    [
                        "思考",
                        "thinking"
                    ],
                    [
                        "调皮",
                        "winking"
                    ],
                    [
                        "放松",
                        "relaxed"
                    ],
                    [
                        "享受",
                        "delicious"
                    ],
                    [
                        "亲亲",
                        "kissy"
                    ],
                    [
                        "自信",
                        "confident"
                    ],
                    [
                        "困倦",
                        "sleepy"
                    ],
                    [
                        "搞怪",
                        "silly"
                    ],
                    [
                        "困惑",
                        "confused"
                    ]
                ]
            }
        ],
        "output": "String",
        "colour": "#4CAF50",
        "tooltip": "情绪表情",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_loop_chat_message",
        "message0": "当AI收到聊天消息",
        "message1": "%1",
        "args1": [
            {"type": "input_statement","name": "STATE_HANDLERS"}
        ],
        "colour": "#4CAF50",
        "inputsInline": false,
        "tooltip": "处理AI-VOX交互消息事件",
        "helpUrl": ""
    },
    {
        "type": "aivox_loop_chat_message_role_var",
        "message0": "收到%1的消息？",
        "args0": [
             {
                "type": "field_dropdown",
                "name": "chat_role",
                "options": [
                    ["助手回复", "Assistant"],
                    ["用户询问", "User"]
                ]
            }
        ],
        "output": "Boolean",
        "tooltip": "AI-VOX设备当前消息的角色",
        "colour": "#4CAF50"
    },
    {
        "inputsInline": false,
        "message0": "%1注册MCP控制服务%2",
        "type": "aivox_mcp_register_control_command",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "MODE",
                "options": [
                    ["常规", "regular"],
                    ["只设置", "set_only"],
                    ["只上报", "report_only"]
                ],
                "tooltip": "选择MCP服务模式"
            },
            {"type": "input_value","name": "NAME","check": "Object"}
        ],
        "message1": "参数%1",
        "args1": [
            {"type": "input_value","name": "INPUT0","check": "Object"}
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "mutator": "dynamic_inputs_mutator"
    },
    {
        "inputsInline": true,
        "message0": "MCP服务参数%1 参数类型%2",
        "type": "aivox_mcp_control_param",
        "args0": [
            {   "type": "field_input",
                "name": "VAR",
                "text": "state"
            },
            {
                "type": "field_dropdown",
                "name": "TYPE",
                "options": [
                    ["布尔值 (Boolean)", "Boolean"],
                    ["数值 (Number)", "Number"],
                    ["字符串 (String)", "String"]
                ]
            }
        ],
        "output": "Object",
        "colour": "#4CAF50",
        "extensions": [
            "aivox3_mcp_control_param_extension"
        ]
    },
    {
        "inputsInline": true,
        "message0": "MCP服务参数%1 参数类型%2",
        "type": "esp32ai_mcp_control_param",
        "args0": [
            {   "type": "field_input",
                "name": "VAR",
                "text": "state"
            },
            {
                "type": "field_dropdown",
                "name": "TYPE",
                "options": [
                    ["布尔值 (Boolean)", "Boolean"],
                    ["数值 (Number)", "Number"],
                    ["字符串 (String)", "String"]
                ]
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "extensions": [
            "esp32ai_mcp_control_param_extension"
        ]
    },
    {
        "inputsInline": true,
        "message0": "MCP服务名称%1 描述%2",
        "type": "aivox_mcp_control",
        "args0": [
            {
                "type": "field_input",
                "name": "VAR",
                "text": "led"
            },
            {
                "type": "input_value",
                "name": "DESC",
                "text": "LED, true for on, false for off"
            }
        ],
        "output": "Object",
        "colour": "#4CAF50"
    },
    {
        "type": "aivox_loop_chat_message_msg_var",
        "message0": "收到的消息内容",
        "output": "String",
        "tooltip": "AI-VOX设备当前聊天的信息内容",
        "colour": "#4CAF50"
    },
    {
        "type": "esp32ai_loop_mcp",
        "message0": "当AI收到MCP消息",
        "message1": "%1",
        "args1": [
            {"type": "input_statement","name": "STATE_HANDLERS"}
        ],
        "colour": "#4CAF50",
        "inputsInline": false,
        "tooltip": "处理AI-VOX MCP信息",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_loop_mcp_new",
        "message0": "%1 注册MCP控制服务",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "MODE",
                "options": [
                    ["常规", "regular"],
                    ["只设置", "set_only"],
                    ["只上报", "report_only"]
                ],
                "tooltip": "选择MCP服务模式"
            }
        ],
        "message1": "服务名称%1 描述%2",
        "args1": [
            {
                "type": "field_input",
                "name": "VAR",
                "text": "led"
            },
            {
                "type": "input_value",
                "name": "DESC",
                "text": "LED, true for on, false for off"
            }
        ],
        "message2": "参数%1",
        "args2": [
            {"type": "input_statement","name": "params_list"}
        ],
        "message3": "消息处理",
        "colour": "#4CAF50",
        "inputsInline": false,
        "tooltip": "MCP服务注册及消息处理",
        "helpUrl": "",
        "extensions": ["esp32ai_loop_mcp_new_extension"]
    },   
    {
        "type": "aivox_get_iot_message_event_name",
        "message0": "设备名称为 %1",
        "args0": [
            {"type": "input_value","name": "ai_vox_mcp_control_name","text": "led"}
        ],
        "output": "Boolean",
        "colour": "#FFC107",
        "tooltip": "",
        "helpUrl": ""
    },
    {
        "type": "aivox_get_iot_message_event_name_new",
        "message0": "MCP服务名称为 %1?",
        "args0": [
            {
                "type": "field_variable", 
                "name": "VAR",
                "variable": "led",
                "variableTypes": ["AIVOX"],
                "defaultType": "AIVOX"
            }
        ],
        "output": "Boolean",
        "colour": "#4CAF50"
    },
    {
        "type": "aivox_state_control_message_event_fuction",
        "message0": "获取设备名称 %1 状态参数 %2 的结果",
        "args0": [
            {"type": "input_value","name": "ai_vox_mcp_control_name","text": "led"},
            {"type": "input_value","name": "ai_vox_mcp_control_state","text": "state"}
        ],
        "output": "null",
        "colour": "#4CAF50",
        "tooltip": "",
        "helpUrl": ""
    },
    {
        "type": "aivox_control_message_event_fuction",
        "message0": "获取MCP服务名称 %1 参数 %2 的结果",
        "args0": [
            {
                "type": "field_variable", 
                "name": "VAR",
                "variable": "led",
                "variableTypes": ["AIVOX"],
                "defaultType": "AIVOX"
            },
            {
                "type": "field_variable", 
                "name": "PVAR",
                "variable": "state",
                "variableTypes": ["AIVOX_PARAM_STATE"],
                "defaultType": "AIVOX_PARAM_STATE"
            }
        ],
        "output": "null",
        "colour": "#4CAF50",
        "tooltip": "",
        "helpUrl": ""
    },
    {
        "inputsInline": true,
        "message0": "上报设备 %1 控制结果",
        "type": "aivox_response_mcp_control_result",
        "args0": [
            {"type": "input_value","name": "ai_vox_mcp_control_name","text": "led"}
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "inputsInline": true,
        "message0": "上报MCP服务名称 %1 执行完成",
        "type": "aivox_response_mcp_control_result_new",
        "args0": [
            {
                "type": "field_variable", 
                "name": "VAR",
                "variable": "led",
                "variableTypes": ["AIVOX"],
                "defaultType": "AIVOX"
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "inputsInline": true,
        "message0": "简单上报MCP服务名称 %1 参数 %2 的值为 %3",
        "type": "aivox_update_mcp_control_state_new",
        "args0": [
            {
                "type": "field_variable", 
                "name": "VAR",
                "variable": "led",
                "variableTypes": ["AIVOX"],
                "defaultType": "AIVOX"
            },
            {
                "type": "field_variable", 
                "name": "PVAR",
                "variable": "state",
                "variableTypes": ["AIVOX_PARAM_STATE"],
                "defaultType": "AIVOX_PARAM_STATE"
            },
            {"type": "input_value","name": "STATE", "text": "nulllab"}
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50"
    },
    {
        "inputsInline": true,
        "message0": "计算上报MCP服务名称 %1 参数 %2",
        "type": "aivox_calculateupdate_mcp_control_state",
        "args0": [
            {
                "type": "field_variable", 
                "name": "VAR",
                "variable": "led",
                "variableTypes": ["AIVOX"],
                "defaultType": "AIVOX"
            },
            {
                "type": "field_variable", 
                "name": "PVAR",
                "variable": "state",
                "variableTypes": ["AIVOX_PARAM_STATE"],
                "defaultType": "AIVOX_PARAM_STATE"
            }
        ],
        "message1": "%1",
        "args1": [
            {
                "type": "input_statement",
                "name": "CODE_BLOCK"
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#2196F3"
    },
    {
        "inputsInline": true,
        "message0": "MCP服务名称 %1",
        "type": "esp32ai_selget_mcp_control",
        "args0": [
            {
                "type": "field_variable",
                "name": "VAR",
                "variable": "led",
                "variableTypes": ["AIVOX"],
                "defaultType": "AIVOX"
            }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#2196F3",
        "mutator": "esp32ai_selget_mcp_control_mutator",
        "extensions": ["esp32ai_selget_mcp_control_extension"]
    },
    {
        "type": "lvgl_port_lock",
        "message0": "获取LVGL锁 超时%1ms",
        "args0": [
            {
                "type": "field_number",
                "name": "TIMEOUT_MS",
                "value": 1000,
                "min": 0,
                "max": 10000
            }
        ],
        "output": "Boolean",
        "colour": "#4CAF50",
        "tooltip": "获取LVGL互斥锁"
    },
    {
        "type": "lvgl_port_unlock",
        "message0": "释放LVGL锁",
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "释放LVGL互斥锁"
    },
    {
        "type": "esp32ai_lvgl_obj_set_style_text_font",
        "message0": "设置 %1 小智字体 %2",
        "args0": [
        {
            "type": "field_variable",
            "name": "VAR",
            "variable": "obj",
            "variableTypes": [
                "lv_obj_t"
            ],
            "defaultType": "lv_obj_t"
        },
        {
            "type": "field_dropdown",
            "name": "FONT",
            "options": [
                [
                    "单色屏文本14号字体",
                    "font_puhui_14_1"
                ],
                [
                    "单色屏30号大图标",
                    "font_awesome_30_1"
                ],
                [
                    "单色屏14号小图标",
                    "font_awesome_14_1"
                ],
                [
                    "彩屏文本16号字体",
                    "font_puhui_16_4"
                ],
                [ "彩屏黑色功能图标30号",
                    "font_awesome_30_4"
                ],
                [ "彩屏黑色功能图标16号",
                    "font_awesome_16_4"
                ],
                [ "彩屏情绪32号",
                    "font_emoji_32_init()"
                ]
            ]
        }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#673AB7",
        "tooltip": "设置对象的文本字体",
        "icon": "fa-light fa-mobile"
    },
    {
        "message0": "返回图片字体 分类：%1",
        "type": "esp32ai_emotion_select",
        "args0": [
            {
                "type": "field_dropdown",
                "name": "CATEGORY",
                "options": [
                    ["表情类", "EMOJI"],
                    ["电池类", "BATTERY"],
                    ["WiFi类", "WIFI"],
                    ["信号类", "SIGNAL"],
                    ["音量类", "VOLUME"],
                    ["媒体控制类", "MEDIA"],
                    ["箭头类", "ARROW"],
                    ["功能图标类", "FUNCTION"]
                ],
                "tooltip": "选择图标分类"
            }
        ],
        "extensions": ["esp32ai_emotion_category_link_extension"],
        "output": "String",
        "colour": "#4CAF50",
        "tooltip": "选择分类和图标，返回对应的图形字体宏"
    },
    {
        "type": "lvgl_label_set_text_emotion",
        "message0": "设置标签 %1 图标文本为 %2",
        "args0": [
        {
            "type": "field_variable",
            "name": "VAR",
            "variable": "label",
            "variableTypes": [
                "lv_obj_t"
            ],
            "defaultType": "lv_obj_t"
        },
        {
            "type": "input_value",
            "name": "TEXT"
        }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "设置标签显示的图标"
    },
    {
        "type": "lvgl_label_set_text_cpemotion",
        "message0": "设置标签 %1 小智彩屏表情 %2",
        "args0": [
        {
            "type": "field_variable",
            "name": "VAR",
            "variable": "label",
            "variableTypes": [
                "lv_obj_t"
            ],
            "defaultType": "lv_obj_t"
        },
        {
            "type": "input_value",
            "name": "TEXT"
        }
        ],
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "设置标签显示的小智彩屏表情"
    },
    {
        "type": "aivox3_init_es8311",
        "extensions":["aivox3_init_es8311_extension"],
        "inputsInline": false,
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "初始化AI-VOX3引擎ES8311模块",
        "helpUrl": ""
    },
    {
        "type": "esp32ai_init_es8388",
        "extensions":["esp32ai_init_es8388_extension"],
        "inputsInline": false,
        "previousStatement": null,
        "nextStatement": null,
        "colour": "#4CAF50",
        "tooltip": "初始化小智语音引擎ES8388模块",
        "helpUrl": ""
    }
]
