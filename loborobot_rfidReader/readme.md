# RFID读卡器库

## 库介绍

本库是湖南创乐博智能科技有限公司的RFID射频卡模块的Blockly图形化编程支持库。通过Arduino的软串口（SoftwareSerial）与RFID读卡器通信，实现RFID标签的读取功能。

## 硬件说明

### RFID读卡器引脚
- **VCC**: 电源正极（5V）
- **GND**: 电源负极
- **SOUT**: 串口数据输出（连接到Arduino的RX引脚）
- **Enable**: 使能引脚（LOW启用，HIGH禁用）

### 连接示例
```
RFID读卡器    Arduino UNO
-----------  -------------
VCC      →   5V
GND      →   GND
SOUT     →   D3 (RX引脚)
Enable   →   D2
```

## 功能模块

### 1. 初始化
- **初始化RFID读卡器**: 设置RX引脚、TX引脚（未使用）和使能引脚

### 2. 事件
- **当读取到标签时**: 当RFID读卡器检测到标签卡时，自动触发执行的代码块

### 3. 控制
- **启用/禁用**: 控制RFID读卡器的工作状态

### 4. 读取
- **有数据可读**: 检查是否有标签数据可读
- **读取标签ID**: 获取当前读取到的10位标签ID

## 使用示例

### 基础示例：读取并显示标签ID

```
初始化RFID读卡器 rfidReader RX引脚 3 TX引脚 4 使能引脚 2

当RFID读卡器 rfidReader 读取到标签时
  标签ID tagID
  执行
    串口打印 "标签ID: "
    串口打印换行 tagID
```

这将生成类似原始示例的代码，当读取到RFID标签时，会通过串口打印标签ID。

### 进阶示例：条件判断

```
初始化RFID读卡器 rfidReader RX引脚 3 TX引脚 4 使能引脚 2

当RFID读卡器 rfidReader 读取到标签时
  标签ID tagID
  执行
    如果 tagID = "0123456789"
      串口打印换行 "访问授权"
    否则
      串口打印换行 "访问拒绝"
```

## 技术参数

- **通信协议**: 串口通信
- **波特率**: 2400 bps（固定）
- **标签ID长度**: 10位字符
- **数据格式**: ASCII码
- **电压**: 5V
- **支持板卡**: Arduino UNO, MEGA, UNO R4等

## 注意事项

1. **引脚选择**（Arduino UNO R4）：
   - RX引脚可选：D0, D1, D2, D3, D8, D14, D15, A1, A2, A3, A4, A5
   - TX引脚：任意数字引脚（本库中未使用）

2. **波特率固定**: RFID读卡器的通信波特率固定为2400 bps，不可更改

3. **标签格式**: 标签ID为10位数字/字母组合的字符串

4. **重复读取**: 库已实现防重复读取机制，同一标签只会触发一次事件，直到标签移开后再次放置

5. **使能引脚**: 
   - LOW（启用）：读卡器正常工作
   - HIGH（禁用）：读卡器停止工作，节省功耗

## 原理说明

RFID读卡器通过串口发送标签数据，数据帧格式为：
```
起始字节 (0x0A) + 10位标签ID + 结束字节 (0x0D)
```

库会自动解析数据帧，提取10位标签ID，并在检测到新标签时触发事件回调。

## 参考资料

- 原始示例代码：34.RFIDReader.ino
- 制造商：湖南创乐博智能科技有限公司
- SoftwareSerial库文档：https://www.arduino.cc/en/Reference/SoftwareSerial

## 版本历史

- **v1.0.0**: 初始版本
  - 基础RFID标签读取功能
  - 事件回调机制
  - 防重复读取
