# 自定义函数 (Custom Functions) 核心库

Arduino/C++编程中的自定义函数核心库，提供函数定义、调用和参数管理功能。

## 库信息
- **库名**: @aily-project/lib-core-functions
- **版本**: 0.0.1
- **作者**: aily Project
- **描述**: 核心库，通常已经集成到初始模板中
- **测试者**: haishen

## 可用模块

### 函数定义系统
基于Blockly标准PROCEDURE系统，提供完整的函数定义和调用功能

### 创建函数
- **无返回值函数**: 执行操作但不返回值的函数
- **有返回值函数**: 执行操作并返回结果的函数
- **参数支持**: 支持多个输入参数
- **局部变量**: 函数内部可使用局部变量

### 函数调用
- **自动生成**: 定义函数后自动生成对应的调用块
- **参数传递**: 支持向函数传递参数
- **返回值**: 有返回值的函数可作为表达式使用

### 高级功能
- **中文函数名**: 支持中文函数名，自动转换为英文标识符
- **递归调用**: 支持函数递归调用
- **作用域管理**: 自动处理变量作用域
- **代码优化**: 自动生成高效的C++代码

## 使用说明

### 创建函数
1. 右键点击工作区选择"创建函数"
2. 输入函数名称
3. 设置参数（可选）
4. 选择是否有返回值
5. 在函数体中编写代码

### 函数调用
1. 函数定义后会自动出现在工具箱中
2. 拖拽函数调用块到程序中
3. 连接必要的参数
4. 如有返回值可作为表达式使用

### 示例用法
```cpp
// 无返回值函数
void blinkLED(int pin, int times) {
  for(int i = 0; i < times; i++) {
    digitalWrite(pin, HIGH);
    delay(500);
    digitalWrite(pin, LOW);
    delay(500);
  }
}

// 有返回值函数
int calculateSum(int a, int b) {
  return a + b;
}

// 函数调用
void setup() {
  blinkLED(13, 3);
  int result = calculateSum(5, 10);
}
```

## 注意事项
- 函数名应遵循C++命名规范
- 中文函数名会自动转换为英文标识符
- 递归函数需要注意终止条件
- 函数参数类型会自动推断
- 避免函数名与系统函数冲突

## 技术特性
- **标准兼容**: 基于Blockly标准PROCEDURE系统
- **智能转换**: 中文函数名自动转换
- **代码生成**: 自动生成优化的C++代码
- **作用域安全**: 自动处理变量作用域
- **递归支持**: 完整的递归调用支持
